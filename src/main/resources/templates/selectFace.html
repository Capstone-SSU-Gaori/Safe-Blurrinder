<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Safe Blurrinder</title>
    <link rel="stylesheet" href="/css/selectFace.css">
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
</head>

<body>
<div class="inner">
    <header>
        <h1>Safe Blurrinder</h1>
    </header>

    <div class="mainBox">
        <div class="topBox">
            <h2>블러 처리에서 제외할 인물을 선택하세요</h2>
        </div>
        <div class="middleBox">
            <div class="leftBox" id="leftBox">

            </div>
        </div>
        <div class="bottomBox">
            <p onclick="" class="submitButton">선택 완료</p>
        </div>
    </div>
</div>

<script type="text/javascript" th:inline="javascript">
    /*<![CDATA[*/
        var result=/*[[${cropImages}]]*/
        console.log(result);
        console.log(typeof(result));

        var objData = JSON.parse(result);
        console.log(objData);
        console.log(typeof(objData));

        const imageCount = objData['cropImages'].length; // image 개수
        var images = new Array(imageCount); //이미지들
        var imageClick=new Array(imageCount); //클릭했는지
        var testUrl='/selectImg/'

        for(var i in objData['cropImages']){
            for(var key in objData['cropImages'][i]){
                images[i] = new Image();
                images[i].src = testUrl+objData['cropImages'][i][key]; //여기서 이미지 넣는데 어떻게 넣어야 하지
                images[i].id=i.toString();
                document.getElementById("leftBox").appendChild(images[i]);
                imageClick[i]=0;
            }
        }

        $(function () { //클릭하는 부분
            $("img").mousedown(function () {
            })
                .click(function () {
                    if (imageClick[$(this).attr("id")] == 1) {
                        imageClick[$(this).attr("id")] = 0;
                        document.getElementById($(this).attr("id")).style.outline = "none";
                    } else {
                        imageClick[$(this).attr("id")] = 1;
                        document.getElementById($(this).attr("id")).style.outline = "solid 4px #6881D0";
                    }

                })
                .mouseover(function() {
                    document.getElementById($(this).attr("id")).style.outline = "solid 4px #6881D0";
                })
                .mouseleave(function() {
                    if(imageClick[$(this).attr("id")] == 0)
                        document.getElementById($(this).attr("id")).style.outline = "none";
                })
        });
    /*]]>*/
</script>
</body>
</html>